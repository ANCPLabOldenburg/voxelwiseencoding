---

title: Train voxel-wise encoding models on BIDS dataset


keywords: fastai
sidebar: home_sidebar

summary: "Functions for extracting relevant BOLD and stimulus data and metadata of a BIDS dataset and for running voxel-wise encoding models."
description: "Functions for extracting relevant BOLD and stimulus data and metadata of a BIDS dataset and for running voxel-wise encoding models."
nb_path: "process_bids.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: process_bids.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="run_model_for_subject" class="doc_header"><code>run_model_for_subject</code><a href="https://github.com/mjboos/voxelwiseencoding/tree/master/voxelwiseencoding/process_bids.py#L188" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>run_model_for_subject</code>(<strong><code>subject_label</code></strong>, <strong><code>bids_dir</code></strong>, <strong><code>mask</code></strong>=<em><code>None</code></em>, <strong><code>bold_prep_kwargs</code></strong>=<em><code>None</code></em>, <strong><code>preprocess_kwargs</code></strong>=<em><code>None</code></em>, <strong><code>encoding_kwargs</code></strong>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>
<p>Runs voxel-wise encoding model for a single subject and returns Ridges and scores</p>
<p>Parameters</p>

<pre><code>subject_label : the BIDS subject label
bids_dir : the path to the BIDS directory
mask : path to mask file or 'epi' if an epi mask should be computed from the first BOLD run
bold_prep_kwargs : None or dict containing the parameters for preprocessing the BOLD files
                   everything that is accepted by nilearn's clean function is an acceptable parameter
preprocess_kwargs : None or dict containing the parameters for lagging and aligning fMRI and stimulus
                    acceptable parameters are ones used by preprocessing.make_X_Y
encoding_kwargs : None or dict containing the parameters for the encoding model
                  acceptable parameters are ones used by encoding.get_ridge_plus_scores
kwargs : additional BIDS specific arguments such as task, ses, desc, and recording

</code></pre>
<p>Returns
    list of Ridge regressions, scores per voxel per fold</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="process_bids_subject" class="doc_header"><code>process_bids_subject</code><a href="https://github.com/mjboos/voxelwiseencoding/tree/master/voxelwiseencoding/process_bids.py#L120" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>process_bids_subject</code>(<strong><code>subject_label</code></strong>, <strong><code>bids_dir</code></strong>, <strong><code>ses</code></strong>=<em><code>None</code></em>, <strong><code>task</code></strong>=<em><code>None</code></em>, <strong><code>desc</code></strong>=<em><code>None</code></em>, <strong><code>recording</code></strong>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>
<p>Localizes BOLD files and stimulus files for subject_label in BIDS folder structure</p>
<p>Parameters</p>

<pre><code>subject_label : the BIDS subject label
bids_dir : the path to the BIDS directory
ses : session indicator, optional
task : task indicator, optional
desc : description indicatr, optional
recording : recording indicator, optional
kwargs : additional arguments

</code></pre>
<p>Returns
    tuple of (list of bold files, path to task meta data,
    list of stimulus tsv files, list of stimulus json files)</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_func_bold_directory" class="doc_header"><code>get_func_bold_directory</code><a href="https://github.com/mjboos/voxelwiseencoding/tree/master/voxelwiseencoding/process_bids.py#L90" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_func_bold_directory</code>(<strong><code>subject_label</code></strong>, <strong><code>bids_dir</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>
<p>Returns a path to the directory in which the bold files of the given subject reside</p>
<p>Parameters</p>

<pre><code>subject_label : the BIDS subject label
bids_dir : the path to the BIDS directory
ses : session indicator, optional
kwargs : additional arguments

</code></pre>
<p>Returns
    bold_folder_name</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

